@using Kendo.Mvc.UI

@using Madhuvan.Datalayer
@using Madhuvan.Web
@model CategoryMaster


<div class="page-title">
    <div>
        <h3>Country</h3>
    </div>
</div>

<div id="breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a href="@Url.Action("Index", "Home")">Home</a>
            <span class="divider"><i class="fa fa-angle-right"></i></span>
        </li>
        <li class="active">Country</li>
    </ul>
</div>

<div class="row">
    <div class="col-md-12">
        @(Html.Kendo().Grid<CategoryMaster>()
              .Name("grid")
              .Columns(columns =>
              {
                  columns.Command(command =>
                  {
                      command.Edit().Text(" ").UpdateText(" ").CancelText(" ");
                      command.Destroy().Text(" ");
                  }).Title("Action").HtmlAttributes(CommonSettings.ActionCenterColumnStyleWithCanEdit)
                      .HeaderHtmlAttributes(CommonSettings.ActionCenterColumnStyleWithCanEdit);
                  columns.Bound(d => d.CategoryName).Title("Country")
                      .HeaderHtmlAttributes(CommonSettings.StatusColumnStyle);
              })
              //.ToolBar(toolbar => toolbar.Create().Text("Add New Category"))
              .ToolBar(toolbar => toolbar.Template("<a class='k-button k-button-icontext' onclick='AddNewCategory()' href='javascript:void(0)'><span class='k-icon k-add'></span>Create New Export Consignment</a>"))
              .Editable(editable =>
              {
                  editable.Mode(GridEditMode.InLine);
                  editable.DisplayDeleteConfirmation("Are you sure you want to delete this Category?");
              })
              .Pageable(x =>
              {
                  x.Refresh(true);
                  x.PageSizes(true);
              })
              .Sortable(sortable => sortable.AllowUnsort(false))
              .Filterable(ftb => ftb.Mode(GridFilterMode.Row))
              .NoRecords()
              .Events(grid => grid.Edit("edit"))
              .DataSource(dataSource => dataSource
                  .Ajax()
                  .ServerOperation(false)
                  .PageSize(10)
                  .Model(model => model.Id(d => d.CategoryId)).Events(events => events.Error("onError"))
                  .Create(update => update.Action("KendoSave", "Category"))
                  .Read(read => read.Action("KendoRead", "Category"))
                  .Update(update => update.Action("KendoSave", "Category"))
                  .Destroy(update => update.Action("KendoDestroy", "Category"))
              ))
    </div>
</div>

<script type="text/javascript">
    function edit(e) {
        if (e.model.isNew()) {
            e.model.set("Active", true);
        }

        setFocusById('Name');
    }

    function AddNewCategory() {
        window.location.href = '@Url.Action("Create", "Category")';
    }
</script>


